# OXIOracle

A coding challenge submission by [John Coppola](https://www.johnnycopes.com/).

## Links

1. [GitHub codespaces](https://probable-robot-5grv69jwjx5c4j6.github.dev/)
1. [Commit history](https://github.com/johnnycopes/atocha/pull/554/commits)
1. [All code changes](https://github.com/johnnycopes/atocha/pull/554/files)

## Setup

Via GitHub codespaces:

1. Open the [codespaces project](https://probable-robot-5grv69jwjx5c4j6.github.dev)
1. Run `npm start oxioracle` in the Codespaces terminal
1. Open https://probable-robot-5grv69jwjx5c4j6-4800.app.github.dev to see the application running

Locally on your machine:

1. Run `git clone https://github.com/johnnycopes/atocha.git` to clone the project monorepo
1. Run `npm install` in your terminal to install all dependencies
1. Run `npm start oxioracle` to boot the application
1. Visit http://localhost:4800 in your browser to see the application running

## Technical details

### Tools used:

1. [Nx](https://nx.dev/) (monorepo)
2. [Angular](https://angular.dev/) (front-end framework), which includes HTML, CSS, TypeScript, and RxJS
3. [Jest](https://jestjs.io/) (unit testing)
4. [Cypress](https://www.cypress.io/) (e2e testing)
5. [Angular Material](https://material.angular.io/components/table/overview) (for the table)
6. [ng2-charts](https://valor-software.com/ng2-charts/) (for the charts)

### Project location

I created Oxioracle inside of [Atocha](https://github.com/johnnycopes/atocha), my personal Nx monorepo where I manage all of my current applications and libraries, rather than creating an independent repository for this project. This allowed me to reuse code that I leverage elsewhere, follow familiar patterns, and save significant time when installing libraries and writing tests.

### Design decisions

#### Data

I used the [JSONplaceholder API](https://jsonplaceholder.typicode.com) mentioned in the project instructions. I called the `/todos` endpoint, which returns a consistent 200 todos. Exactly one API call is made in OXIOracle to fetch the data (inside the [`APP_INITIALIZER` function](https://github.com/johnnycopes/atocha/blob/8d757a3da145317212fd6f8d76004a02ae269942/apps/oxioracle/src/app/app.config.ts#L33-L37)) and the results are then stored in local state for consumption by the UI.

All state for fetching todo data and managing local todos state happens in the `TodoService`. Internally, that service uses the `ApiService` to fetch the data (with help from Angular's `HttpClient` service) and my own custom [`State` class](https://github.com/johnnycopes/atocha/blob/main/libs/core/data-access/src/lib/state.ts) (a generic RxJS observable store) for state management.

All chart state happens in the `ChartService`. However, nothing about the charts is persisted, so this is ultimately used for transforming the todo data into the correct shape for the charts to consume.

#### Sortable table

Creating a data grid (aka table) with meaningful functionality is an onerous undertaking in UI development. Due to the limited scope of this project, I chose to use Google's Angular Material `<mat-table>` for this feature ([docs link](https://material.angular.io/components/table/overview)).

#### Alternate data visualization

Similar to the table, creating custom charts without help from a library is a project unto itself. I chose to use [ng2-charts](https://valor-software.com/ng2-charts/), which is an Angular wrapper around the framework-agnostic [chart.js](https://www.chartjs.org/).

#### Data entry form

I leaned on Angular's `ReactiveFormsModule` to build the form for adding a new todo. The ID is automatically generated by the application, but the user ID, title, and completion state are defined by the user. There's validation logic on all fields that will throw visible errors if everything isn't filled out on failed submission. There's also a toast message that launches when a new todo is successful submission.
