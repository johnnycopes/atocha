<ui-small-caps header="Places">
  <div class="regions">
    <core-counted-checkbox-tree-new *ngIf="tree"
      class="places"
      [item]="tree"
      [getId]="getId"
      [getChildren]="getChildren"
      [getLeafItemCount]="getNumberOfCountries"
      [itemTemplate]="label"
      size="large"
      [ngModel]="model"
      (ngModelChange)="onModelChange($event)"
    ></core-counted-checkbox-tree-new>
  </div>
</ui-small-caps>

<ng-template
  #label
  let-item
  let-level="level"
  let-selected="selected"
  let-total="total"
>
  <div *ngIf="level === 0"
    class="top"
  >
    <div class="top__message">
      <span class="bold">
        {{ selected }} / {{ total }}
      </span>
      possible countries in the cards.
    </div>

    <div class="top__buttons">
      <button core-button="secondary"
        class="top__select-all"
        (click)="onSelectAll()"
      >
        Select all
      </button>
      <button core-button="secondary"
        class="top__clear-all"
        (click)="onClearAll()"
      >
        Clear all
      </button>
    </div>
  </div>

  <div *ngIf="level === 1">
    <!-- <ui-icon class="region__image"
      [icon]="getId(item)"
      [highlighted]="!!selected"
    ></ui-icon> -->
    <span *ngIf="level === 1"
      class="bold"
    >
      {{ getId(item) }} ({{ selected }} / {{ total }})
    </span>
  </div>

  <span *ngIf="level === 2">
    {{ getId(item) }} ({{ total }})
  </span>
</ng-template>
