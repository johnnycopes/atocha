<ui-small-caps header="Places">
  <div class="top">
    <div class="top__counter">
      <span class="bold">
        {{ overallSelected }} / {{ overallTotal }}
      </span>
      possible countries in the cards.
    </div>
    <div class="top__buttons">
      <button core-button="secondary"
        class="top__select-all"
        (click)="onSelectAll()"
      >
        Select all
      </button>
      <button core-button="secondary"
        class="top__clear-all"
        (click)="onClearAll()"
      >
        Clear all
      </button>
    </div>
  </div>
  <div class="regions">
    <!-- <div class="region"
      *ngFor="let regionState of regionStates; trackBy: trackByFn"
    >
      <ui-icon class="region__image"
        [icon]="regionState.region.name"
        [highlighted]="!!regionState.selected"
      ></ui-icon>
      <core-counted-checkbox-tree class="region__checkboxes"
        [item]="regionState.region"
        [getId]="getId"
        [getChildren]="getChildren"
        [getLeafItemCount]="getNumberOfCountries"
        [itemTemplate]="label"
        size="large"
        [ngModel]="state"
        (ngModelChange)="onStateChange($event)"
        (selectedChange)="onSelectedChange(regionState, $event)"
        (totalChange)="onTotalChange(regionState, $event)"
      ></core-counted-checkbox-tree>
    </div> -->
    <core-counted-checkbox-tree-new *ngIf="tree"
      class="region__checkboxes"
      [item]="tree"
      [getId]="getId"
      [getChildren]="getChildren"
      [getLeafItemCount]="getNumberOfCountries"
      [itemTemplate]="label"
      size="large"
      [ngModel]="placesModel"
      (ngModelChange)="onModelChange($event)"
    ></core-counted-checkbox-tree-new>
  </div>
</ui-small-caps>

<ng-template
  #label
  let-item
  let-level="level"
  let-selected="selected"
  let-total="total"
>
  <span *ngIf="level === 0"
    class="bold"
  >
    {{ selected }} / {{ total }} possible countries in the cards.
  </span>

  <span *ngIf="level === 1"
    class="bold"
  >
    {{ getId(item) }} ({{ selected }} / {{ total }})
  </span>

  <span *ngIf="level === 2">
    {{ getId(item) }} ({{ total }})
  </span>
</ng-template>
