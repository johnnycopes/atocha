<core-checkbox-tree
  formControlName="spiritNames"
  [getId]="getId"
  [getChildren]="getChildren"
  [tree]="tree"
  [template]="checkboxTemplate"
></core-checkbox-tree>

<ng-template #checkboxTemplate
  let-item
  let-level="level"
  let-checked="checked"
  let-indeterminate="indeterminate"
  let-onChange="onChange"
>
  <core-checkbox ui-card-header
    *ngIf="level === 0"
    [indeterminate]="indeterminate"
    size="normal"
    [ngModel]="checked"
    (ngModelChange)="onChange($event, item)"
  >
    {{ item.display?.name ?? item.id }}
  </core-checkbox>

  <core-checkbox class="checkbox"
    *ngIf="level > 0"
    [style.margin-left.px]="(level - 1) * 24"
    [indeterminate]="indeterminate"
    size="normal"
    [ngModel]="checked"
    (ngModelChange)="onChange($event, item)"
  >
    {{ item.display?.name ?? item.id }}
    <ui-difficulty-emblem
      *ngIf="item.display?.difficulty"
      [value]="item.display.difficulty"
    ></ui-difficulty-emblem>
    <ui-expansion-emblem
      *ngIf="item.display?.expansion"
      [value]="item.display.expansion"
    ></ui-expansion-emblem>
  </core-checkbox>
</ng-template>
