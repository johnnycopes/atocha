<main ui-page>
  <ng-container ui-page-content>
    {{ form.value | json }}
  </ng-container>
  <form *ngIf="config"
    class="config"
    ui-page-content
    [formGroup]="form"
  >
    <ui-card-group
      name="You"
      description="What are you playing with?"
    >
      <ui-card name="expansions">
        <core-checkbox-tree-new ui-card-content
          formControlName="expansions"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="expansionsTree"
        ></core-checkbox-tree-new>
      </ui-card>

      <ui-card name="players">
        <h3 ui-card-header>
          Players
        </h3>
        <div ui-card-content>placeholder</div>
      </ui-card>

      <ui-card expansions="difficulty">
        <h3 ui-card-header>
          Difficulty
        </h3>
        <div ui-card-content>placeholder</div>
      </ui-card>
    </ui-card-group>

    <ui-card-group
      name="The Game"
      description="What are you open to playing with?"
    >
      <ui-card name="spirits">
        <core-checkbox-tree-new ui-card-content
          formControlName="spirits"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="spiritsTree"
          [itemTemplate]="configTemplate"
        ></core-checkbox-tree-new>
      </ui-card>

      <ui-card name="maps">
        <core-checkbox-tree-new ui-card-content
          formControlName="maps"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="mapsTree"
          [itemTemplate]="configTemplate"
        ></core-checkbox-tree-new>
      </ui-card>

      <ui-card name="boards">
        <core-checkbox-tree-new ui-card-content
          formControlName="boards"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="boardsTree"
          [itemTemplate]="configTemplate"
        ></core-checkbox-tree-new>
      </ui-card>

      <ui-card name="scenarios">
        <core-checkbox-tree-new ui-card-content
          formControlName="scenarios"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="scenariosTree"
          [itemTemplate]="configTemplate"
        ></core-checkbox-tree-new>
      </ui-card>

      <ui-card name="adversaries">
        <core-checkbox-tree-new ui-card-content
          formControlName="adversaries"
          [getId]="getId"
          [getChildren]="getChildren"
          [item]="adversariesTree"
          [itemTemplate]="configTemplate"
        ></core-checkbox-tree-new>
      </ui-card>
    </ui-card-group>

    <div ui-page-actions>
      <button core-button
        [disabled]="false"
        type="button"
        (click)="onGenerate()"
      >
        Generate
      </button>
    </div>
  </form>
</main>

<ng-template #configTemplate let-item>
  {{ item.display?.name ?? item.id }}
  <ui-difficulty-emblem
    *ngIf="item.display?.difficulty"
    [value]="item.display.difficulty"
  ></ui-difficulty-emblem>
  <ui-expansion-emblem
    *ngIf="item.display?.expansion"
    [value]="item.display.expansion"
  ></ui-expansion-emblem>
</ng-template>
