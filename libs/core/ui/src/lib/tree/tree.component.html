<ng-container
  [ngTemplateOutlet]="template ? template : defaultTemplate"
  [ngTemplateOutletContext]="{
    $implicit: node,
    level: level
  }"
></ng-container>

<ng-container *ngIf="getChildren(node)?.length">
  <core-tree
    *ngFor="let child of getChildren(node); trackBy: trackById"
    [node]="child"
    [template]="template ? template : defaultTemplate"
    [level]="level + 1"
    [getId]="getId"
    [getChildren]="getChildren"
  ></core-tree>
</ng-container>

<ng-template #defaultTemplate let-item>
  <span data-test="core-tree-default-item">
    {{ getId(item) }}
  </span>
</ng-template>
