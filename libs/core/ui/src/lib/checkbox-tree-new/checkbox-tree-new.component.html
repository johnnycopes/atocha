<core-tree *ngIf="item"
  [node]="item"
  [getId]="getId"
  [getChildren]="getChildren"
  [template]="checkbox"
></core-tree>

<ng-template
  #checkbox
  let-item
  let-level="level"
>
  <ng-container
    [ngTemplateOutlet]="itemTemplate ? itemTemplate : defaultTemplate"
    [ngTemplateOutletContext]="{
      $implicit: item,
      level: level,
      checked: this.states[this.getId(item)] === 'checked',
      indeterminate: this.states[this.getId(item)] === 'indeterminate',
      onChange: this.onChange
    }"
  ></ng-container>
</ng-template>

<ng-template #defaultTemplate let-item>
  {{ this.getId(item) }}
</ng-template>
