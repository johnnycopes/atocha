<core-tree *ngIf="node"
  [node]="node"
  [getId]="getId"
  [getChildren]="getChildren"
  [template]="checkboxTemplate"
></core-tree>

<ng-template
  #checkboxTemplate
  let-node
  let-level="level"
>
  <ng-container
    [ngTemplateOutlet]="template ? template : defaultTemplate"
    [ngTemplateOutletContext]="{
      $implicit: node,
      level: level,
      checked: this.states[this.getId(node)] === 'checked',
      indeterminate: this.states[this.getId(node)] === 'indeterminate',
      onChange: this.onChange
    }"
  ></ng-container>
</ng-template>

<ng-template #defaultTemplate let-node>
  {{ this.getId(node) }}
</ng-template>
