<core-tree *ngIf="tree"
  [tree]="tree"
  [getId]="getId"
  [getChildren]="getChildren"
  [template]="checkboxTemplate"
></core-tree>

<ng-template
  #checkboxTemplate
  let-tree
  let-level="level"
>
  <ng-container
    [ngTemplateOutlet]="template ? template : defaultTemplate"
    [ngTemplateOutletContext]="{
      $implicit: tree,
      level: level,
      checked: this.states[this.getId(tree)] === 'checked',
      indeterminate: this.states[this.getId(tree)] === 'indeterminate',
      onChange: this.onChange
    }"
  ></ng-container>
</ng-template>

<ng-template #defaultTemplate let-tree>
  {{ this.getId(tree) }}
</ng-template>
