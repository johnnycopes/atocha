<ng-container *ngIf="vm$ | async as vm">
  <header app-header
    [view]="vm.view"
    [text]="vm.text"
    (viewChange)="changeView($event)"
    (textChange)="search($event)"
  ></header>

  <main class="content container">
    <div *ngIf="vm.view === 'favorites'"
      class="overview"
    >
      <!-- <p>
        {{ vm.leaderIds.size + vm.developmentIds.size + vm.familyIds.size }}
        {{ vm.leaderIds.size + vm.developmentIds.size + vm.familyIds.size | corePlural : 'favorite' }}
      </p> -->
      <button (click)="clearFavorites()">
        Clear Favorites
      </button>
    </div>

    <app-families
      [families]="vm.families.filteredCards"
      [total]="vm.families.totalCards"
      [favoriteIds]="vm.families.favoriteIds"
      (toggleId)="vm.families.toggleId($event)"
    ></app-families>

    <ui-cards
      type="{{ vm.leaders.type | titlecase }}"
      [cards]="vm.leaders.filteredCards"
      [total]="vm.leaders.totalCards"
      [favorites]="vm.leaders.favoriteIds"
    >
      <app-leader *uiCard="vm.leaders.filteredCards as leader"
        [data]="leader"
        [favorite]="vm.leaders.favoriteIds.has(vm.leaders.getId(leader))"
        (favoriteChange)="vm.leaders.toggleId(vm.leaders.getId(leader))"
      ></app-leader>
    </ui-cards>

    <ui-cards
      type="{{ vm.developments.type | titlecase }}"
      [cards]="vm.developments.filteredCards"
      [total]="vm.developments.totalCards"
      [favorites]="vm.developments.favoriteIds"
    >
      <app-development *uiCard="vm.developments.filteredCards as development"
        [data]="development"
        [favorite]="vm.developments.favoriteIds.has(vm.developments.getId(development))"
        (favoriteChange)="vm.developments.toggleId(vm.developments.getId(development))"
      ></app-development>
    </ui-cards>
  </main>
</ng-container>
