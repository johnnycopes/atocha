<ng-container *ngIf="vm$ | async as vm">
  <header app-header
    [view]="vm.view"
    [text]="vm.text"
    (viewChange)="changeView($event)"
    (textChange)="search($event)"
  ></header>

  <main class="content container">
    <div *ngIf="vm.view === 'favorites'"
      class="overview"
    >
      <p>
        {{ vm.favoriteLeaders.size + vm.favoriteDevelopments.size }} favorites
      </p>
      <button (click)="clearFavorites()">
        Clear Favorites
      </button>
    </div>
    <ui-cards
      type="Leader"
      [cards]="vm.filteredLeaders"
      [total]="vm.totalLeaders"
      [favorites]="vm.favoriteLeaders"
      [trackByFn]="leaderTrackByFn"
    >
      <ng-template #cardTemplate
        let-leader
      >
        <ui-leader
          [data]="leader"
          [favorite]="vm.favoriteLeaders.has(leader.name)"
          (favoriteChange)="updateFavoriteLeader(leader.name)"
        ></ui-leader>
      </ng-template>
    </ui-cards>

    <app-developments
      [developments]="vm.filteredDevelopments"
      [totalDevelopments]="vm.totalDevelopments"
      [favoriteDevelopments]="vm.favoriteDevelopments"
      (favoriteDevelopmentChange)="updateFavoriteDevelopment($event)"
    ></app-developments>
  </main>
</ng-container>
