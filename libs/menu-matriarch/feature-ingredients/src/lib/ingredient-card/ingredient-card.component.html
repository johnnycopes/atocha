<ui-card *ngIf="state$ | async as state"
  class="ingredient"
>
  <ng-container [ngSwitch]="state">
    <ng-container *ngSwitchCase="'default'">
      <h4 class="name">
        {{ name }}
      </h4>
      <ui-count
        class="count"
        type="dishes"
        [count]="dishIds.length"
      ></ui-count>
      <button core-button="tertiary"
        [uiOptionsMenuTrigger]="optionsMenu"
      >
        <fa-icon class="icon"
          [icon]="menuToggleIcon"
        ></fa-icon>
      </button>
      <ui-options-menu #optionsMenu>
        <li ui-options-menu-item
          (click)="onRename()"
        >
          Rename
        </li>
        <li ui-options-menu-item
          (click)="onMove()"
        >
          Move
        </li>
        <li ui-options-menu-item
          (click)="delete.emit()"
        >
          Delete
        </li>
      </ui-options-menu>
    </ng-container>
    <ui-inline-name-edit
      *ngSwitchCase="'renaming'"
      [name]="name"
      (cancel)="onCancel()"
      (save)="onRenameSave($event)"
    ></ui-inline-name-edit>
    <app-inline-type-select class="start-type-form"
      *ngSwitchCase="'changingType'"
      [startType]="type"
      (cancel)="onCancel()"
      (save)="onChangeTypeSave($event)"
    ></app-inline-type-select>
  </ng-container>
</ui-card>
